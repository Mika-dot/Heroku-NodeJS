!function t(e, n, i) { function r(o, a) { if (!n[o]) { if (!e[o]) { var l = "function" == typeof require && require; if (!a && l) return l(o, !0); if (s) return s(o, !0); var u = new Error("Cannot find module '" + o + "'"); throw u.code = "MODULE_NOT_FOUND", u; } var h = n[o] = { exports: {} }; e[o][0].call(h.exports, function (t) { var n = e[o][1][t]; return r(n ? n : t); }, h, h.exports, t, e, n, i); } return n[o].exports; } for (var s = "function" == typeof require && require, o = 0; o < i.length; o++) r(i[o]); return r; }({ 1: [function (t, e, n) { e.exports = { layout: ["bold", "italic", "blank", "url"], maxChars: !1, autoResize: !0 }; }, {}], 2: [function (t, e, n) { "use strict"; function i(t, e) { if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function"); } var r = function () { function t(t, e) { for (var n = 0; n < e.length; n++) { var i = e[n]; i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(t, i.key, i); } } return function (e, n, i) { return n && t(e.prototype, n), i && t(e, i), e; }; }(); e.exports = function () { function e(t, e) { return t.classList ? t.classList.add(e) : t.className += " " + e; } var n = [t("./plugins/bold"), t("./plugins/italic"), t("./plugins/url")], s = t("marked"), o = function (t, e, n) { return window.attachEvent ? t.attachEvent("on" + e, n) : t.addEventListener(e, n, !1); }; return function () { function t(r, s) { var a = this; if (i(this, t), this.target = r, this.options = s, this.textarea = document.createElement("textarea"), this.textarea.value = this.target.innerText, this.target.innerHTML = "", this.target.appendChild(this.textarea), e(this.target, "modown-editor"), s.autoResize) { var l = function () { a.textarea.style.height = "auto", a.textarea.style.height = a.textarea.scrollHeight + "px"; }, u = function () { window.setTimeout(l, 0); }; o(this.textarea, "change", l), o(this.textarea, "input", u), o(this.textarea, "cut", u), o(this.textarea, "paste", u), o(this.textarea, "drop", u), o(this.textarea, "keydown", u), l(); } else this.textarea.style.resize = "vertical", this.textarea.style.overflowY = "auto"; s.maxChars && (this.counter = document.createElement("p"), e(this.counter, "counter"), this.target.appendChild(this.counter), this.textarea.maxLength = s.maxChars.toString(), this.count = function () { a.counter.innerText = s.maxChars - a.textarea.value.length + " characters remaining"; }, o(this.textarea, "change", this.count), o(this.textarea, "input", this.count), o(this.textarea, "cut", this.count), o(this.textarea, "paste", this.count), o(this.textarea, "drop", this.count), o(this.textarea, "keydown", this.count), this.count()), s.plugins && n.push.apply(n, s.plugins); var h = document.createElement("div"); e(h, "controls"), this.target.insertBefore(h, this.textarea); var c = !0, p = !1, g = void 0; try { for (var f, d = s.layout[Symbol.iterator](); !(c = (f = d.next()).done); c = !0) { var x = f.value, y = document.createElement("div"); if ("blank" === x) e(y, "blank"); else { e(y, "control"); var M = !0, m = !1, k = void 0; try { for (var b, L = n[Symbol.iterator](); !(M = (b = L.next()).done); M = !0) !function () { var t = b.value; t.name === x && (y.innerHTML = t.icon, o(y, "click", function () { return t.action(a); })); }(); } catch (t) { m = !0, k = t; } finally { try { !M && L.return && L.return(); } finally { if (m) throw k; } } } h.appendChild(y); } } catch (t) { p = !0, g = t; } finally { try { !c && d.return && d.return(); } finally { if (p) throw g; } } } return r(t, [{ key: "getCursorPosition", value: function () { return this.textarea.selectionStart === this.textarea.selectionEnd ? this.textarea.selectionStart : -1; } }, { key: "setCursorPosition", value: function (t) { return this.textarea.selectionStart = this.textarea.selectionEnd = t; } }, { key: "addContentAtCursorPosition", value: function (t) { return this.textarea.value = this.textarea.value.substring(0, this.textarea.selectionStart) + t + this.textarea.value.substring(this.textarea.selectionStart), this.compile && this.compile(), this.count ? this.count() : void 0; } }, { key: "focus", value: function () { return this.textarea.focus(); } }, { key: "charAt", value: function (t) { return this.textarea.charAt(t); } }, { key: "getSelection", value: function () { return this.textarea.value.substring(this.textarea.selectionStart, this.textarea.selectionEnd); } }, { key: "setSelection", value: function (t) { return this.textarea.value = this.textarea.value.substring(0, this.textarea.selectionStart) + t + this.textarea.value.substring(this.textarea.selectionEnd), this.compile && this.compile(), this.count ? this.count() : void 0; } }, { key: "preview", value: function (t) { var e = this; this.compile = function () { t.innerHTML = s(e.textarea.value); }, o(this.textarea, "change", this.compile), o(this.textarea, "input", this.compile), o(this.textarea, "cut", this.compile), o(this.textarea, "paste", this.compile), o(this.textarea, "drop", this.compile), o(this.textarea, "keydown", this.compile), this.compile(); } }]), t; }(); }(); }, { "./plugins/bold": 4, "./plugins/italic": 5, "./plugins/url": 6, marked: 7 }], 3: [function (t, e, n) { "use strict"; var i = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (t) { return typeof t; } : function (t) { return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t; }; window.modown = function () { function e(t, n) { for (var r in n) "object" !== i(t[r]) || "object" !== i(n[r]) || Array.isArray(t[r]) || Array.isArray(n[r]) ? t[r] = n[r] : t[r] = e(t[r], n[r]); return t; } function n(t) { return "object" === ("undefined" == typeof HTMLElement ? "undefined" : i(HTMLElement)) ? t instanceof HTMLElement : t && "object" === (void 0 === t ? "undefined" : i(t)) && null !== t && 1 === t.nodeType && "string" == typeof t.nodeName; } var r = t("./MoDown"); return { init: function i(s, o) { return o = e(t("../config.json"), o), Array.isArray(s) ? s.map(function (t) { return i(t, o); }) : n(s) && "div" === s.tagName.toLowerCase() ? new r(s, o) : void console.error("modown: Failed to create a modown editor on the passed element or elements."); } }; }(); }, { "../config.json": 1, "./MoDown": 2 }], 4: [function (t, e, n) { "use strict"; e.exports = function () { return { name: "bold", icon: '<span style="font-weight: bold; font-family: serif;">B</span>', action: function (t) { function e(e, n) { t.textarea.selectionStart = e, t.textarea.selectionEnd = n; } function n(t) { return e(t, t); } var i = t.getCursorPosition(), r = t.textarea.selectionStart, s = t.textarea.selectionEnd; i === -1 ? t.getSelection().startsWith("__") && t.getSelection().endsWith("__") ? (t.setSelection(t.getSelection().substring(2, t.getSelection().length - 2)), n(s - 4)) : (t.setSelection("__" + t.getSelection() + "__"), n(s + 4)) : (t.addContentAtCursorPosition("__enter text here__"), e(r + 2, s + 17)), t.focus(); } }; }(); }, {}], 5: [function (t, e, n) { "use strict"; e.exports = function () { return { name: "italic", icon: '<span style="font-style: italic; font-family: serif;">I</span>', action: function (t) { function e(e, n) { t.textarea.selectionStart = e, t.textarea.selectionEnd = n; } function n(t) { return e(t, t); } var i = t.getCursorPosition(), r = t.textarea.selectionStart, s = t.textarea.selectionEnd; i === -1 ? t.getSelection().startsWith("*") && t.getSelection().endsWith("*") ? (t.setSelection(t.getSelection().substring(1, t.getSelection().length - 1)), n(s - 2)) : (t.setSelection("*" + t.getSelection() + "*"), n(s + 2)) : (t.addContentAtCursorPosition("*enter text here*"), e(r + 1, s + 16)), t.focus(); } }; }(); }, {}], 6: [function (t, e, n) { "use strict"; e.exports = function () { return { name: "url", icon: '<img src="data:image/svg+xml;utf8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pgo8IS0tIEdlbmVyYXRvcjogQWRvYmUgSWxsdXN0cmF0b3IgMTkuMC4wLCBTVkcgRXhwb3J0IFBsdWctSW4gLiBTVkcgVmVyc2lvbjogNi4wMCBCdWlsZCAwKSAgLS0+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDU0Ljk3MSA1NC45NzEiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDU0Ljk3MSA1NC45NzE7IiB4bWw6c3BhY2U9InByZXNlcnZlIiB3aWR0aD0iMTZweCIgaGVpZ2h0PSIxNnB4Ij4KPGc+Cgk8cGF0aCBkPSJNNTEuMTczLDMuODAxYy01LjA2OC01LjA2OC0xMy4zMTUtNS4wNjYtMTguMzg0LDBsLTkuMTkyLDkuMTkyYy0wLjc4MSwwLjc4MS0wLjc4MSwyLjA0NywwLDIuODI4ICAgYzAuNzgxLDAuNzgxLDIuMDQ3LDAuNzgxLDIuODI4LDBsOS4xOTItOS4xOTJjMS42OTEtMS42OSwzLjk1MS0yLjYyMiw2LjM2My0yLjYyMmMyLjQxMywwLDQuNjczLDAuOTMyLDYuMzY0LDIuNjIzICAgczIuNjIzLDMuOTUxLDIuNjIzLDYuMzY0YzAsMi40MTItMC45MzIsNC42NzItMi42MjMsNi4zNjNMMzYuMzI1LDMxLjM3OWMtMy41MSwzLjUwOC05LjIxOSwzLjUwOC0xMi43MjksMCAgIGMtMC43ODEtMC43ODEtMi4wNDctMC43ODEtMi44MjgsMHMtMC43ODEsMi4wNDgsMCwyLjgyOGMyLjUzNCwyLjUzNCw1Ljg2MywzLjgwMSw5LjE5MiwzLjgwMXM2LjY1OC0xLjI2Nyw5LjE5Mi0zLjgwMSAgIGwxMi4wMjEtMTIuMDIxYzIuNDQ3LTIuNDQ2LDMuNzk1LTUuNzExLDMuNzk1LTkuMTkyQzU0Ljk2OCw5LjUxMiw1My42Miw2LjI0OCw1MS4xNzMsMy44MDF6IiBmaWxsPSIjMDAwMDAwIi8+Cgk8cGF0aCBkPSJNMjcuMTMyLDQwLjU3bC03Ljc3OCw3Ljc3OGMtMS42OTEsMS42OTEtMy45NTEsMi42MjMtNi4zNjQsMi42MjNjLTIuNDEyLDAtNC42NzMtMC45MzItNi4zNjQtMi42MjMgICBjLTMuNTA5LTMuNTA5LTMuNTA5LTkuMjE5LDAtMTIuNzI4TDE3Ljk0LDI0LjMwNmMxLjY5MS0xLjY5LDMuOTUxLTIuNjIyLDYuMzY0LTIuNjIyYzIuNDEyLDAsNC42NzIsMC45MzIsNi4zNjMsMi42MjIgICBjMC43ODEsMC43ODEsMi4wNDcsMC43ODEsMi44MjgsMHMwLjc4MS0yLjA0NywwLTIuODI4Yy01LjA2Ny01LjA2Ny0xMy4zMTQtNS4wNjgtMTguMzg0LDBMMy43OTcsMzIuNzkzICAgYy0yLjQ0NiwyLjQ0Ni0zLjc5NCw1LjcxMS0zLjc5NCw5LjE5MmMwLDMuNDgsMS4zNDgsNi43NDUsMy43OTUsOS4xOTFjMi40NDYsMi40NDcsNS43MTEsMy43OTUsOS4xOTEsMy43OTUgICBjMy40ODEsMCw2Ljc0Ni0xLjM0OCw5LjE5Mi0zLjc5NWw3Ljc3OC03Ljc3OGMwLjc4MS0wLjc4MSwwLjc4MS0yLjA0NywwLTIuODI4UzI3LjkxMywzOS43ODksMjcuMTMyLDQwLjU3eiIgZmlsbD0iIzAwMDAwMCIvPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+Cjwvc3ZnPgo=" />', action: function (t) { function e(e, n) { t.textarea.selectionStart = e, t.textarea.selectionEnd = n; } var n = t.getCursorPosition(), i = t.textarea.selectionStart, r = t.textarea.selectionEnd; n === -1 ? (t.setSelection("[" + t.getSelection() + "](" + t.getSelection() + ")"), e(i + 1, r + t.getSelection().length + 1)) : (t.addContentAtCursorPosition("[enter link description](enter link url)"), e(i + 1, r + 23)), t.focus(); } }; }(); }, {}], 7: [function (t, e, n) { (function (t) { (function () { function t(t) { this.tokens = [], this.tokens.links = {}, this.options = t || c.defaults, this.rules = p.normal, this.options.gfm && (this.options.tables ? this.rules = p.tables : this.rules = p.gfm); } function i(t, e) { if (this.options = e || c.defaults, this.links = t, this.rules = g.normal, this.renderer = this.options.renderer || new r(), this.renderer.options = this.options, !this.links) throw new Error("Tokens array requires a `links` property."); this.options.gfm ? this.options.breaks ? this.rules = g.breaks : this.rules = g.gfm : this.options.pedantic && (this.rules = g.pedantic); } function r(t) { this.options = t || {}; } function s(t) { this.tokens = [], this.token = null, this.options = t || c.defaults, this.options.renderer = this.options.renderer || new r(), this.renderer = this.options.renderer, this.renderer.options = this.options; } function o(t, e) { return t.replace(e ? /&/g : /&(?!#?\w+;)/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;").replace(/'/g, "&#39;"); } function a(t) { return t.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/g, function (t, e) { return e = e.toLowerCase(), "colon" === e ? ":" : "#" === e.charAt(0) ? "x" === e.charAt(1) ? String.fromCharCode(parseInt(e.substring(2), 16)) : String.fromCharCode(+e.substring(1)) : ""; }); } function l(t, e) { return t = t.source, e = e || "", function n(i, r) { return i ? (r = r.source || r, r = r.replace(/(^|[^\[])\^/g, "$1"), t = t.replace(i, r), n) : new RegExp(t, e); }; } function u() { } function h(t) { for (var e, n, i = 1; i < arguments.length; i++) { e = arguments[i]; for (n in e) Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]); } return t; } function c(e, n, i) { if (i || "function" == typeof n) { i || (i = n, n = null), n = h({}, c.defaults, n || {}); var r, a, l = n.highlight, u = 0; try { r = t.lex(e, n); } catch (t) { return i(t); } a = r.length; var p = function (t) { if (t) return n.highlight = l, i(t); var e; try { e = s.parse(r, n); } catch (e) { t = e; } return n.highlight = l, t ? i(t) : i(null, e); }; if (!l || l.length < 3) return p(); if (delete n.highlight, !a) return p(); for (; u < r.length; u++) !function (t) { "code" !== t.type ? --a || p() : l(t.text, t.lang, function (e, n) { return e ? p(e) : null == n || n === t.text ? --a || p() : (t.text = n, t.escaped = !0, void (--a || p())); }); }(r[u]); } else try { return n && (n = h({}, c.defaults, n)), s.parse(t.lex(e, n), n); } catch (t) { if (t.message += "\nPlease report this to https://github.com/chjj/marked.", (n || c.defaults).silent) return "<p>An error occured:</p><pre>" + o(t.message + "", !0) + "</pre>"; throw t; } } var p = { newline: /^\n+/, code: /^( {4}[^\n]+\n*)+/, fences: u, hr: /^( *[-*_]){3,} *(?:\n+|$)/, heading: /^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/, nptable: u, lheading: /^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/, blockquote: /^( *>[^\n]+(\n(?!def)[^\n]+)*\n*)+/, list: /^( *)(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/, html: /^ *(?:comment *(?:\n|\s*$)|closed *(?:\n{2,}|\s*$)|closing *(?:\n{2,}|\s*$))/, def: /^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/, table: u, paragraph: /^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/, text: /^[^\n]+/ }; p.bullet = /(?:[*+-]|\d+\.)/, p.item = /^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/, p.item = l(p.item, "gm")(/bull/g, p.bullet)(), p.list = l(p.list)(/bull/g, p.bullet)("hr", "\\n+(?=\\1?(?:[-*_] *){3,}(?:\\n+|$))")("def", "\\n+(?=" + p.def.source + ")")(), p.blockquote = l(p.blockquote)("def", p.def)(), p._tag = "(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|[^\\w\\s@]*@)\\b", p.html = l(p.html)("comment", /<!--[\s\S]*?-->/)("closed", /<(tag)[\s\S]+?<\/\1>/)("closing", /<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)(/tag/g, p._tag)(), p.paragraph = l(p.paragraph)("hr", p.hr)("heading", p.heading)("lheading", p.lheading)("blockquote", p.blockquote)("tag", "<" + p._tag)("def", p.def)(), p.normal = h({}, p), p.gfm = h({}, p.normal, { fences: /^ *(`{3,}|~{3,})[ \.]*(\S+)? *\n([\s\S]*?)\s*\1 *(?:\n+|$)/, paragraph: /^/, heading: /^ *(#{1,6}) +([^\n]+?) *#* *(?:\n+|$)/ }), p.gfm.paragraph = l(p.paragraph)("(?!", "(?!" + p.gfm.fences.source.replace("\\1", "\\2") + "|" + p.list.source.replace("\\1", "\\3") + "|")(), p.tables = h({}, p.gfm, { nptable: /^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/, table: /^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/ }), t.rules = p, t.lex = function (e, n) { return new t(n).lex(e); }, t.prototype.lex = function (t) { return t = t.replace(/\r\n|\r/g, "\n").replace(/\t/g, "    ").replace(/\u00a0/g, " ").replace(/\u2424/g, "\n"), this.token(t, !0); }, t.prototype.token = function (t, e, n) { for (var i, r, s, o, a, l, u, h, c, t = t.replace(/^ +$/gm, ""); t;) if ((s = this.rules.newline.exec(t)) && (t = t.substring(s[0].length), s[0].length > 1 && this.tokens.push({ type: "space" })), s = this.rules.code.exec(t)) t = t.substring(s[0].length), s = s[0].replace(/^ {4}/gm, ""), this.tokens.push({ type: "code", text: this.options.pedantic ? s : s.replace(/\n+$/, "") }); else if (s = this.rules.fences.exec(t)) t = t.substring(s[0].length), this.tokens.push({ type: "code", lang: s[2], text: s[3] || "" }); else if (s = this.rules.heading.exec(t)) t = t.substring(s[0].length), this.tokens.push({ type: "heading", depth: s[1].length, text: s[2] }); else if (e && (s = this.rules.nptable.exec(t))) { for (t = t.substring(s[0].length), l = { type: "table", header: s[1].replace(/^ *| *\| *$/g, "").split(/ *\| */), align: s[2].replace(/^ *|\| *$/g, "").split(/ *\| */), cells: s[3].replace(/\n$/, "").split("\n") }, h = 0; h < l.align.length; h++) /^ *-+: *$/.test(l.align[h]) ? l.align[h] = "right" : /^ *:-+: *$/.test(l.align[h]) ? l.align[h] = "center" : /^ *:-+ *$/.test(l.align[h]) ? l.align[h] = "left" : l.align[h] = null; for (h = 0; h < l.cells.length; h++) l.cells[h] = l.cells[h].split(/ *\| */); this.tokens.push(l); } else if (s = this.rules.lheading.exec(t)) t = t.substring(s[0].length), this.tokens.push({ type: "heading", depth: "=" === s[2] ? 1 : 2, text: s[1] }); else if (s = this.rules.hr.exec(t)) t = t.substring(s[0].length), this.tokens.push({ type: "hr" }); else if (s = this.rules.blockquote.exec(t)) t = t.substring(s[0].length), this.tokens.push({ type: "blockquote_start" }), s = s[0].replace(/^ *> ?/gm, ""), this.token(s, e, !0), this.tokens.push({ type: "blockquote_end" }); else if (s = this.rules.list.exec(t)) { for (t = t.substring(s[0].length), o = s[2], this.tokens.push({ type: "list_start", ordered: o.length > 1 }), s = s[0].match(this.rules.item), i = !1, c = s.length, h = 0; h < c; h++) l = s[h], u = l.length, l = l.replace(/^ *([*+-]|\d+\.) +/, ""), ~l.indexOf("\n ") && (u -= l.length, l = this.options.pedantic ? l.replace(/^ {1,4}/gm, "") : l.replace(new RegExp("^ {1," + u + "}", "gm"), "")), this.options.smartLists && h !== c - 1 && (a = p.bullet.exec(s[h + 1])[0], o === a || o.length > 1 && a.length > 1 || (t = s.slice(h + 1).join("\n") + t, h = c - 1)), r = i || /\n\n(?!\s*$)/.test(l), h !== c - 1 && (i = "\n" === l.charAt(l.length - 1), r || (r = i)), this.tokens.push({ type: r ? "loose_item_start" : "list_item_start" }), this.token(l, !1, n), this.tokens.push({ type: "list_item_end" }); this.tokens.push({ type: "list_end" }); } else if (s = this.rules.html.exec(t)) t = t.substring(s[0].length), this.tokens.push({ type: this.options.sanitize ? "paragraph" : "html", pre: !this.options.sanitizer && ("pre" === s[1] || "script" === s[1] || "style" === s[1]), text: s[0] }); else if (!n && e && (s = this.rules.def.exec(t))) t = t.substring(s[0].length), this.tokens.links[s[1].toLowerCase()] = { href: s[2], title: s[3] }; else if (e && (s = this.rules.table.exec(t))) { for (t = t.substring(s[0].length), l = { type: "table", header: s[1].replace(/^ *| *\| *$/g, "").split(/ *\| */), align: s[2].replace(/^ *|\| *$/g, "").split(/ *\| */), cells: s[3].replace(/(?: *\| *)?\n$/, "").split("\n") }, h = 0; h < l.align.length; h++) /^ *-+: *$/.test(l.align[h]) ? l.align[h] = "right" : /^ *:-+: *$/.test(l.align[h]) ? l.align[h] = "center" : /^ *:-+ *$/.test(l.align[h]) ? l.align[h] = "left" : l.align[h] = null; for (h = 0; h < l.cells.length; h++) l.cells[h] = l.cells[h].replace(/^ *\| *| *\| *$/g, "").split(/ *\| */); this.tokens.push(l); } else if (e && (s = this.rules.paragraph.exec(t))) t = t.substring(s[0].length), this.tokens.push({ type: "paragraph", text: "\n" === s[1].charAt(s[1].length - 1) ? s[1].slice(0, -1) : s[1] }); else if (s = this.rules.text.exec(t)) t = t.substring(s[0].length), this.tokens.push({ type: "text", text: s[0] }); else if (t) throw new Error("Infinite loop on byte: " + t.charCodeAt(0)); return this.tokens; }; var g = { escape: /^\\([\\`*{}\[\]()#+\-.!_>])/, autolink: /^<([^ >]+(@|:\/)[^ >]+)>/, url: u, tag: /^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/, link: /^!?\[(inside)\]\(href\)/, reflink: /^!?\[(inside)\]\s*\[([^\]]*)\]/, nolink: /^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/, strong: /^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/, em: /^\b_((?:[^_]|__)+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/, code: /^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/, br: /^ {2,}\n(?!\s*$)/, del: u, text: /^[\s\S]+?(?=[\\<!\[_*`]| {2,}\n|$)/ }; g._inside = /(?:\[[^\]]*\]|[^\[\]]|\](?=[^\[]*\]))*/, g._href = /\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/, g.link = l(g.link)("inside", g._inside)("href", g._href)(), g.reflink = l(g.reflink)("inside", g._inside)(), g.normal = h({}, g), g.pedantic = h({}, g.normal, { strong: /^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/, em: /^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/ }), g.gfm = h({}, g.normal, { escape: l(g.escape)("])", "~|])")(), url: /^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/, del: /^~~(?=\S)([\s\S]*?\S)~~/, text: l(g.text)("]|", "~]|")("|", "|https?://|")() }), g.breaks = h({}, g.gfm, { br: l(g.br)("{2,}", "*")(), text: l(g.gfm.text)("{2,}", "*")() }), i.rules = g, i.output = function (t, e, n) { return new i(e, n).output(t); }, i.prototype.output = function (t) { for (var e, n, i, r, s = ""; t;) if (r = this.rules.escape.exec(t)) t = t.substring(r[0].length), s += r[1]; else if (r = this.rules.autolink.exec(t)) t = t.substring(r[0].length), "@" === r[2] ? (n = ":" === r[1].charAt(6) ? this.mangle(r[1].substring(7)) : this.mangle(r[1]), i = this.mangle("mailto:") + n) : (n = o(r[1]), i = n), s += this.renderer.link(i, null, n); else if (this.inLink || !(r = this.rules.url.exec(t))) { if (r = this.rules.tag.exec(t)) !this.inLink && /^<a /i.test(r[0]) ? this.inLink = !0 : this.inLink && /^<\/a>/i.test(r[0]) && (this.inLink = !1), t = t.substring(r[0].length), s += this.options.sanitize ? this.options.sanitizer ? this.options.sanitizer(r[0]) : o(r[0]) : r[0]; else if (r = this.rules.link.exec(t)) t = t.substring(r[0].length), this.inLink = !0, s += this.outputLink(r, { href: r[2], title: r[3] }), this.inLink = !1; else if ((r = this.rules.reflink.exec(t)) || (r = this.rules.nolink.exec(t))) { if (t = t.substring(r[0].length), e = (r[2] || r[1]).replace(/\s+/g, " "), !(e = this.links[e.toLowerCase()]) || !e.href) { s += r[0].charAt(0), t = r[0].substring(1) + t; continue; } this.inLink = !0, s += this.outputLink(r, e), this.inLink = !1; } else if (r = this.rules.strong.exec(t)) t = t.substring(r[0].length), s += this.renderer.strong(this.output(r[2] || r[1])); else if (r = this.rules.em.exec(t)) t = t.substring(r[0].length), s += this.renderer.em(this.output(r[2] || r[1])); else if (r = this.rules.code.exec(t)) t = t.substring(r[0].length), s += this.renderer.codespan(o(r[2], !0)); else if (r = this.rules.br.exec(t)) t = t.substring(r[0].length), s += this.renderer.br(); else if (r = this.rules.del.exec(t)) t = t.substring(r[0].length), s += this.renderer.del(this.output(r[1])); else if (r = this.rules.text.exec(t)) t = t.substring(r[0].length), s += this.renderer.text(o(this.smartypants(r[0]))); else if (t) throw new Error("Infinite loop on byte: " + t.charCodeAt(0)); } else t = t.substring(r[0].length), n = o(r[1]), i = n, s += this.renderer.link(i, null, n); return s; }, i.prototype.outputLink = function (t, e) { var n = o(e.href), i = e.title ? o(e.title) : null; return "!" !== t[0].charAt(0) ? this.renderer.link(n, i, this.output(t[1])) : this.renderer.image(n, i, o(t[1])); }, i.prototype.smartypants = function (t) { return this.options.smartypants ? t.replace(/---/g, "—").replace(/--/g, "–").replace(/(^|[-\u2014\/(\[{"\s])'/g, "$1‘").replace(/'/g, "’").replace(/(^|[-\u2014\/(\[{\u2018\s])"/g, "$1“").replace(/"/g, "”").replace(/\.{3}/g, "…") : t; }, i.prototype.mangle = function (t) { if (!this.options.mangle) return t; for (var e, n = "", i = t.length, r = 0; r < i; r++) e = t.charCodeAt(r), Math.random() > .5 && (e = "x" + e.toString(16)), n += "&#" + e + ";"; return n; }, r.prototype.code = function (t, e, n) { if (this.options.highlight) { var i = this.options.highlight(t, e); null != i && i !== t && (n = !0, t = i); } return e ? '<pre><code class="' + this.options.langPrefix + o(e, !0) + '">' + (n ? t : o(t, !0)) + "\n</code></pre>\n" : "<pre><code>" + (n ? t : o(t, !0)) + "\n</code></pre>"; }, r.prototype.blockquote = function (t) { return "<blockquote>\n" + t + "</blockquote>\n"; }, r.prototype.html = function (t) { return t; }, r.prototype.heading = function (t, e, n) { return "<h" + e + ' id="' + this.options.headerPrefix + n.toLowerCase().replace(/[^\w]+/g, "-") + '">' + t + "</h" + e + ">\n"; }, r.prototype.hr = function () { return this.options.xhtml ? "<hr/>\n" : "<hr>\n"; }, r.prototype.list = function (t, e) { var n = e ? "ol" : "ul"; return "<" + n + ">\n" + t + "</" + n + ">\n"; }, r.prototype.listitem = function (t) { return "<li>" + t + "</li>\n"; }, r.prototype.paragraph = function (t) { return "<p>" + t + "</p>\n"; }, r.prototype.table = function (t, e) { return "<table>\n<thead>\n" + t + "</thead>\n<tbody>\n" + e + "</tbody>\n</table>\n"; }, r.prototype.tablerow = function (t) { return "<tr>\n" + t + "</tr>\n"; }, r.prototype.tablecell = function (t, e) { var n = e.header ? "th" : "td"; return (e.align ? "<" + n + ' style="text-align:' + e.align + '">' : "<" + n + ">") + t + "</" + n + ">\n"; }, r.prototype.strong = function (t) { return "<strong>" + t + "</strong>"; }, r.prototype.em = function (t) { return "<em>" + t + "</em>"; }, r.prototype.codespan = function (t) { return "<code>" + t + "</code>"; }, r.prototype.br = function () { return this.options.xhtml ? "<br/>" : "<br>"; }, r.prototype.del = function (t) { return "<del>" + t + "</del>"; }, r.prototype.link = function (t, e, n) { if (this.options.sanitize) { try { var i = decodeURIComponent(a(t)).replace(/[^\w:]/g, "").toLowerCase(); } catch (t) { return ""; } if (0 === i.indexOf("javascript:") || 0 === i.indexOf("vbscript:")) return ""; } var r = '<a href="' + t + '"'; return e && (r += ' title="' + e + '"'), r += ">" + n + "</a>"; }, r.prototype.image = function (t, e, n) { var i = '<img src="' + t + '" alt="' + n + '"'; return e && (i += ' title="' + e + '"'), i += this.options.xhtml ? "/>" : ">"; }, r.prototype.text = function (t) { return t; }, s.parse = function (t, e, n) { return new s(e, n).parse(t); }, s.prototype.parse = function (t) { this.inline = new i(t.links, this.options, this.renderer), this.tokens = t.reverse(); for (var e = ""; this.next();) e += this.tok(); return e; }, s.prototype.next = function () { return this.token = this.tokens.pop(); }, s.prototype.peek = function () { return this.tokens[this.tokens.length - 1] || 0; }, s.prototype.parseText = function () { for (var t = this.token.text; "text" === this.peek().type;) t += "\n" + this.next().text; return this.inline.output(t); }, s.prototype.tok = function () { switch (this.token.type) { case "space": return ""; case "hr": return this.renderer.hr(); case "heading": return this.renderer.heading(this.inline.output(this.token.text), this.token.depth, this.token.text); case "code": return this.renderer.code(this.token.text, this.token.lang, this.token.escaped); case "table": var t, e, n, i, r = "", s = ""; for (n = "", t = 0; t < this.token.header.length; t++) ({ header: !0, align: this.token.align[t] }), n += this.renderer.tablecell(this.inline.output(this.token.header[t]), { header: !0, align: this.token.align[t] }); for (r += this.renderer.tablerow(n), t = 0; t < this.token.cells.length; t++) { for (e = this.token.cells[t], n = "", i = 0; i < e.length; i++) n += this.renderer.tablecell(this.inline.output(e[i]), { header: !1, align: this.token.align[i] }); s += this.renderer.tablerow(n); } return this.renderer.table(r, s); case "blockquote_start": for (var s = ""; "blockquote_end" !== this.next().type;) s += this.tok(); return this.renderer.blockquote(s); case "list_start": for (var s = "", o = this.token.ordered; "list_end" !== this.next().type;) s += this.tok(); return this.renderer.list(s, o); case "list_item_start": for (var s = ""; "list_item_end" !== this.next().type;) s += "text" === this.token.type ? this.parseText() : this.tok(); return this.renderer.listitem(s); case "loose_item_start": for (var s = ""; "list_item_end" !== this.next().type;) s += this.tok(); return this.renderer.listitem(s); case "html": var a = this.token.pre || this.options.pedantic ? this.token.text : this.inline.output(this.token.text); return this.renderer.html(a); case "paragraph": return this.renderer.paragraph(this.inline.output(this.token.text)); case "text": return this.renderer.paragraph(this.parseText()); } }, u.exec = u, c.options = c.setOptions = function (t) { return h(c.defaults, t), c; }, c.defaults = { gfm: !0, tables: !0, breaks: !1, pedantic: !1, sanitize: !1, sanitizer: null, mangle: !0, smartLists: !1, silent: !1, highlight: null, langPrefix: "lang-", smartypants: !1, headerPrefix: "", renderer: new r(), xhtml: !1 }, c.Parser = s, c.parser = s.parse, c.Renderer = r, c.Lexer = t, c.lexer = t.lex, c.InlineLexer = i, c.inlineLexer = i.output, c.parse = c, void 0 !== e && "object" == typeof n ? e.exports = c : "function" == typeof define && define.amd ? define(function () { return c; }) : this.marked = c; }).call(function () { return this || ("undefined" != typeof window ? window : t); }()); }).call(this, "undefined" != typeof global ? global : "undefined" != typeof self ? self : "undefined" != typeof window ? window : {}); }, {}] }, {}, [3]);



window.m = modown.init(document.getElementById("modown"), {
	maxChars: 5000
});


window.m.preview(document.getElementById("preview"));